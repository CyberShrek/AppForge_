{"version":3,"file":"UserCheck-19371e53.js","sources":["../../../../../../../typescript/util/data.ts","../../../../../../../typescript/util/domWizard.ts","../../../../../../../typescript/properties.ts","../../../../../../../typescript/util/resolver.ts","../../../../../../../typescript/util/modal.ts","../../../../../../../typescript/api/abstract/Accessor.ts","../../../../../../../typescript/api/abstract/JsonAccessor.ts","../../../../../../../typescript/store/appConfig.ts","../../../../../../../typescript/api/UserCheck.ts"],"sourcesContent":["// Returns vararg items as a Set of the vararg items\r\nimport {Field} from \"../fragments/form/section/field/Field\"\r\n\r\nexport function setOf<T>(...items: T[]): Set<T>{\r\n    return new Set(items)\r\n}\r\n\r\n// Returns a Map of the vararg Pair entries\r\nexport function mapOf<K, V>(...entries: Pair<K, V>[]): Map<K, V>{\r\n    return new Map(entries.map(entry => [entry.first, entry.second]))\r\n}\r\n\r\n// Returns two arguments as a Pair object\r\nexport function pairOf<F, S>(first: F, second: S): Pair<F, S>{\r\n    return {first, second}\r\n}\r\n\r\n// Returns a basic number from gotten string if this is possible, or 0 if not\r\nexport function numberOf(word: string|number): number {\r\n    return isNaN(Number(word)) ? 0 : Number(word)\r\n}\r\n\r\n// Returns a Map consisting of the vararg Maps\r\nexport function concatMaps(...maps: Map<any, any>[]): Map<any, any>{\r\n    const buffer = []\r\n    maps.forEach(map => {\r\n        buffer.push(...map.entries())\r\n    })\r\n    return new Map(buffer)\r\n}\r\n\r\n// Returns sorted by key Map\r\nexport function sortMap<K, V>(contentMap: Map<K, V>): Map<K, V>{\r\n    return new Map([...contentMap.entries()].sort(\r\n        (a : [K, V], b : [K, V]) : number => a[0] > b[0] ? 1 : a[0] < b[0] ? -1 : 0\r\n    ))\r\n}\r\n\r\nexport function filterMap<K, V>(map: Map<K, V>, filter: (value: V, key: K) => boolean): Map<K, V> {\r\n    return new Map(Array.from(map).filter(([key, value]) => filter(value, key)))\r\n}\r\n\r\nexport function mapToJson<V>(map: Map<string, V>): {[k: string]: V} {\r\n    const obj: {[k: string]: V} = {}\r\n    map.forEach((value, key) => obj[key] = value)\r\n    return obj\r\n}\r\n\r\nexport function jsonToMap<V>(json: object): Map<string, V> {\r\n    const map: Map<string, V> = new Map()\r\n    for (const key in json) {\r\n        map.set(key, json[key])\r\n    }\r\n    return map\r\n}\r\n\r\nexport function compareMaps<K, V>(map1: Map<K, V>|null, map2: Map<K, V>|null): boolean {\r\n    if(map1 === null || map2 === null)\r\n        return map1 === map2\r\n\r\n    if (map1.size !== map2.size)\r\n        return false\r\n\r\n    for (const [key, value] of map1) {\r\n        if (!map2.has(key))\r\n            return false\r\n        if (map2.get(key) !== value)\r\n            return false\r\n    }\r\n\r\n    return true\r\n}\r\n\r\nexport function compareObjects(a: object, b: object): boolean{\r\n    return JSON.stringify(valueOrDefault(a, null)) === JSON.stringify(valueOrDefault(b, null))\r\n}\r\n\r\nexport function setToArray<T>(set: Set<T>): T[] {\r\n    return [...set]\r\n}\r\n\r\nexport function prettify<T>(value: T): string{\r\n    if(value === null || value === undefined)\r\n        return \"\"\r\n    if(typeof value !== \"object\")\r\n        return String(value)\r\n    if(value instanceof Set || value instanceof Array)\r\n        return Array.from(value).join(\", \")\r\n    if(value instanceof Map)\r\n        return [...value.entries()].map(([key, value]) => `${value} (${key})`).join(\", \")\r\n    if (value instanceof Date)\r\n        return stringifyDate(value)\r\n\r\n    return JSON.stringify(value, null, 2)\r\n}\r\n\r\nexport function jsonify<T>(value: T|null):  any{\r\n    if(value === null || value === undefined)\r\n        return null\r\n    if(typeof value !== \"object\")\r\n        return value\r\n    if(value instanceof Set)\r\n        return setToArray(value)\r\n    if(value instanceof Map)\r\n        return mapToJson(value)\r\n\r\n    return value\r\n}\r\n\r\nexport function jsonifyFields(fields: Map<string, Field<any>>): JsonProperties{\r\n    const json: { [key: string]: object } = {}\r\n    fields.forEach((field, key) => {\r\n        if(!field.hidden) {\r\n            json[key] = field.jsonValue\r\n        }\r\n    })\r\n    return json\r\n}\r\nexport function stringifyDate(date: Date): string {\r\n    const year = date.getFullYear(),\r\n        month = date.getMonth() + 1,\r\n        day = date.getDate()\r\n    return `${year}-${month < 10 ? '0' : ''}${month}-${day < 10 ? '0' : ''}${day}`\r\n}\r\nexport function javaSetToSet(javaSet: string): Set<string>{\r\n    return setOf(...splitJavaCollection(javaSet))\r\n}\r\nexport function javaMapToMap(javaMap: string): Map<string, string>{\r\n    return mapOf(\r\n        ...splitJavaCollection(javaMap)\r\n        .map(pair => {\r\n            const entry = pair.split(\"=\")\r\n            return pairOf(entry[0], entry[1])\r\n        })\r\n    )\r\n}\r\nexport function splitJavaCollection(javaCollection: string): string[]{\r\n    return javaCollection\r\n        .slice(1, -1) // Removing '{' and '}' in the both sides of the string\r\n        .split(\", \")\r\n}\r\n\r\nexport function transposeMatrix<T>(matrix: T[][]): T[][]{\r\n    return matrix[0].map((_, i) => matrix.map(row => row[i]))\r\n}\r\n\r\nexport const isNullOrUndefined = (value: any): boolean => value === null || value === undefined\r\n\r\nexport const valueOrDefault = <T>(value: T | any, defaultValue: T): T =>\r\n    isNullOrUndefined(value) ? defaultValue : value\r\n\r\nexport const valueOrError = <T>(value: T | any, errorMessage: string): T =>{\r\n    if(isNullOrUndefined(value)) throw new Error(errorMessage)\r\n    return value\r\n}\r\n\r\nexport function extractJsonItemsWithSuffix(json: {}, suffix: string): {}{\r\n    const items = {}\r\n    for (const key in json)\r\n        if(key.endsWith(suffix))\r\n            items[key] = json[key]\r\n\r\n    return items\r\n}\r\n\r\nexport const mapToVirtualSelectOptions = (map: Map<string, string>) =>\r\n    [...map.entries()].map(entry => {\r\n        return {\r\n            label: entry[1],\r\n            value: entry[0],\r\n            alias: entry[0],\r\n            description: entry[0]\r\n        }\r\n    })","// Used to create inner html and return them as elements\r\nconst factoryElement = document.createElement(\"factory\")\r\ndocument.body.appendChild(factoryElement)\r\nfactoryElement.hidden = true\r\n\r\nexport function create<T extends HTMLElement>(html: string): T{\r\n    factoryElement.innerHTML = html\r\n    return factoryElement.firstElementChild as T\r\n}\r\n\r\n// Removes all child elements\r\nexport function emptyElement(element: Element, withText: boolean = true){\r\n    const text = element.textContent\r\n    while(element.firstElementChild !== null)\r\n        element.firstElementChild.remove()\r\n\r\n    if(!withText) element.textContent = text\r\n}\r\n\r\nconst setOfUniqueIds = new Set<string>()\r\n// Returns startName with serial number\r\nexport function generateUniqueId(startName: string = \"element\"){\r\n    let serialNumber = 0,\r\n        id: string\r\n\r\n    do {\r\n        id = startName + \"-\" + serialNumber\r\n        serialNumber++\r\n    }\r\n\r\n    while (setOfUniqueIds.has(id) || document.getElementById(id) !== null)\r\n    setOfUniqueIds.add(id)\r\n    return id\r\n}\r\n\r\nexport function scrollIntoElement(element: HTMLElement) {\r\n    element.scrollIntoView({behavior: \"smooth\", block: \"start\"})\r\n}\r\n\r\nexport function toggleFullscreen(element: HTMLElement){\r\n    if(!!getFullscreenElement())\r\n        document.exitFullscreen()\r\n    else\r\n        element.requestFullscreen()\r\n}\r\n\r\nexport function getFullscreenElement(): Element{\r\n    return document.querySelector(\":fullscreen\")\r\n}\r\n\r\n// Each enable of cursor loading adds 1 item into this array, each disabling removes also 1 item.\r\n// The only purpose is to prevent disabling when not all loaded\r\nlet cursorLoadersCount = 0\r\n\r\nexport function addCursorLoader() {\r\n    document.documentElement.style.cursor = 'wait'\r\n    cursorLoadersCount++\r\n}\r\n\r\nexport function removeCursorLoader() {\r\n    cursorLoadersCount--\r\n    if(cursorLoadersCount <= 0)\r\n        document.documentElement.style.cursor = 'default'\r\n}","export const\r\n    imagesLocation = \"/appforge/img/\",\r\n    stylesLocation = \"/appforge/css/\",\r\n    modulesLocation = \"/appforge/js/\",\r\n\r\n    virtualSelectProperties = {\r\n        additionalClasses: \"multiselect\",\r\n        disabled: true,\r\n        autofocus: false,\r\n        markSearchResults: true,\r\n        zIndex: 100,\r\n        optionsCount: 6,\r\n        maxWidth: \"100%\",\r\n        position: \"bottom\",\r\n        disableAllOptionsSelectedText: true,\r\n        placeholder: \"\",\r\n        noOptionsText: \"Варианты не найдены\",\r\n        noSearchResultsText: \"Результатов не найдено\",\r\n        selectAllText: \"Выбрать все\",\r\n        searchPlaceholderText: \"Поиск...\",\r\n        optionsSelectedText: \"(выбрано)\",\r\n        optionSelectedText: \"вариант выбран\",\r\n        allOptionsSelectedText: \"Все\",\r\n        clearButtonText: \"Очистить\",\r\n        moreText: \"ещё...\"\r\n    }","import {modulesLocation, stylesLocation} from \"../properties\";\r\n\r\nconst\r\n    stylesPromises  = new Map<string, Promise<any>>(),\r\n    modulesPromises = new Map<string, Promise<any>>()\r\n\r\nexport const resolveStyle = (name: string) =>\r\n    promisePromise(name, stylesPromises, new Promise((resolve, reject) => {\r\n        const link = document.createElement('link')\r\n        link.rel     = 'stylesheet'\r\n        link.href    = `${stylesLocation}${name}.css`\r\n        link.onload  = resolve\r\n        link.onerror = reject\r\n        document.head.appendChild(link)\r\n    }))\r\n\r\nexport const resolveModule = (name: string) =>\r\n    promisePromise(name, modulesPromises, import(`${modulesLocation}${name}.js`))\r\n\r\n\r\nfunction promisePromise<T>(promiseName: string,\r\n                           promiseContainer: Map<string, Promise<any>>,\r\n                           promise: Promise<T>): Promise<T>{\r\n\r\n    if(!promiseContainer.has(promiseName))\r\n        promiseContainer.set(promiseName, promise)\r\n\r\n    return promiseContainer.get(promiseName)\r\n}","import swal, {SweetAlertResult} from \"sweetalert2\"\r\nimport {type SweetAlertOptions, type SweetAlertPosition} from \"sweetalert2\"\r\nimport {resolveStyle} from \"./resolver\"\r\n\r\nresolveStyle(\"third-party/sweetalert2\")\r\n\r\nlet mouseEvent: MouseEvent\r\ndocument.addEventListener(\"mousemove\", event => mouseEvent = event)\r\n\r\nexport function popupMessage(title?: string, text?: string){\r\n    popupSweetModal({title, text})\r\n}\r\n\r\nexport function popupList(title?: string, list?: { icon: string, text: string }[], footer?: string){\r\n    popupSweetModal({\r\n        title,\r\n        html:`<ul>${list.map(item => `<li style='list-style-type: \"${item.icon}\\t\"'>${item.text}</li>`).join(\"\")}</ul>`,\r\n        footer\r\n    })\r\n}\r\n\r\nexport function popupAction(title?: string, text?: string, confirmButtonText?: string, onConfirm?: () => void){\r\n    popupSweetModal({\r\n        title,\r\n        text,\r\n        confirmButtonText,\r\n        showConfirmButton: true\r\n    }).then(result => {\r\n        if(result.isConfirmed)\r\n            onConfirm()\r\n    })\r\n}\r\n\r\nexport function popupTimeoutAction(text?: string, confirmButtonText?: string, onConfirm?: () => void, radioOptions?: {[key: string]: string}){\r\n    popupSweetModal({\r\n        text, confirmButtonText,\r\n        input: radioOptions ? \"radio\" : undefined,\r\n        inputOptions: radioOptions ? radioOptions : undefined,\r\n        showConfirmButton: true,\r\n        timer: 3000,\r\n        timerProgressBar: true,\r\n        backdrop: false\r\n    }).then(result => {\r\n        if(result.isConfirmed)\r\n            onConfirm()\r\n    })\r\n}\r\n\r\nexport function popupError(title?: string, error?: Error, footer?: string){\r\n    popupSweetModal({title, text: error.message, icon: \"error\", footer})\r\n    throw error\r\n}\r\n\r\nexport function popupHttpDataError(error?: Error, footer?: string){\r\n    popupError(\"Ошибка получения данных\", error, footer)\r\n}\r\n\r\nfunction popupSweetModal(options: SweetAlertOptions): Promise<SweetAlertResult>{\r\n    const position = getSweetMousePosition()\r\n    return swal.fire({\r\n        confirmButtonColor: \"var(--primary-color)\",\r\n        position,\r\n        showClass: {popup: 'animate__animated '+getAnimationShowClass(position)},\r\n        hideClass: {popup: 'animate__animated animate__zoomOut'},\r\n        showCloseButton: true,\r\n        allowEnterKey: false,\r\n        showConfirmButton: false,\r\n        ...options\r\n    })\r\n}\r\n\r\nfunction getSweetMousePosition(): SweetAlertPosition{\r\n    if(!mouseEvent) return \"center\"\r\n\r\n    const { clientX, clientY } = mouseEvent,\r\n        screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\r\n        screenHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight,\r\n        horizontalPosition = clientX <= screenWidth / 3 ? 'left' : clientX >= (screenWidth / 3) * 2 ? 'right' : 'center',\r\n        verticalPosition = clientY <= screenHeight / 3 ? 'top' : clientY >= (screenHeight / 3) * 2 ? 'bottom' : 'center',\r\n        position = `${verticalPosition}-${horizontalPosition}`\r\n\r\n    return position === \"top-center\" ? \"top\" : position === \"bottom-center\" ? \"bottom\" : position as SweetAlertPosition\r\n}\r\n\r\nfunction getAnimationShowClass(position: SweetAlertPosition): string{\r\n    switch (position) {\r\n        case \"top-left\"     : return \"animate__fadeInTopLeft\"\r\n        case \"top\"          : return \"animate__fadeInDown\"\r\n        case \"top-right\"    : return \"animate__fadeInTopRight\"\r\n        case \"center-left\"  : return \"animate__fadeInLeft\"\r\n        case \"center\"       : return \"animate__fadeIn\"\r\n        case \"center-right\" : return \"animate__fadeInRight\"\r\n        case \"bottom-left\"  : return \"animate__fadeInBottomLeft\"\r\n        case \"bottom\"       : return \"animate__fadeInUp\"\r\n        case \"bottom-right\" : return \"animate__fadeInBottomRight\"\r\n        default             : return \"\"\r\n    }\r\n}","import wretch from \"wretch\"\r\nimport {jsonify, jsonToMap, mapToJson} from \"../../util/data\"\r\nimport {removeCursorLoader, addCursorLoader} from \"../../util/domWizard\"\r\nimport {popupHttpDataError} from \"../../util/modal\"\r\n\r\n\r\nexport abstract class Accessor<RESOURCE> {\r\n\r\n    abstract path: string\r\n    method: \"GET\" | \"POST\" = \"GET\"\r\n    params: Map<string, string> | {[param: string] : string}\r\n    headers: Map<string, string> | {[header: string] : string}\r\n    body: any\r\n    errorFooter: string = \"Ошибка получения ресурса\"\r\n\r\n\r\n    fetch(body?: object): Promise<RESOURCE> {\r\n        addCursorLoader()\r\n        if(body) this.body = body\r\n        return this.request\r\n            .catch((error: Error) => popupHttpDataError(error, this.errorFooter))\r\n            .finally(() => removeCursorLoader())\r\n            .then(entity => {\r\n                if (entity) return entity as RESOURCE\r\n            })\r\n    }\r\n\r\n    protected get requestInit(){\r\n        const requestInit = wretch(this.path + (this.params ? \"?\" + Object.entries(jsonify(this.params)).map(entry => entry[0]+\"=\"+entry[1]).join(\"&\") : \"\"))\r\n            .headers({\r\n                \"Content-Type\": \"application/json;charset=UTF-8\",\r\n                ...jsonify(this.headers)\r\n            })\r\n            .body(this.body ? JSON.stringify(this.body) : undefined)\r\n\r\n        return (this.method === \"GET\" ? requestInit.get() : requestInit.post())\r\n    }\r\n\r\n    protected abstract get request(): Promise<RESOURCE>\r\n}","import {Accessor} from \"./Accessor\"\r\n\r\nexport abstract class JsonAccessor<RESOURCE = any> extends Accessor<RESOURCE>{\r\n\r\n     override get request(): Promise<RESOURCE> {\r\n        return this.requestInit.text().then(text => {if(text) return JSON.parse(text)})\r\n    }\r\n}","// @ts-ignore config variable is placed in the html file\r\nexport let appConfig: AppConfig = window.config ? config : {}\r\n\r\nexport function setAppConfig(config: AppConfig){\r\n    appConfig = config\r\n}","import {JsonAccessor} from \"./abstract/JsonAccessor\"\r\nimport {appConfig} from \"../store/appConfig\"\r\n\r\nexport class UserCheck extends JsonAccessor<UserInfo>{\r\n    path = \"/appforge/ucheck\"\r\n    override errorFooter = \"Не удалось пройти проверку\"\r\n\r\n    constructor() {\r\n        super()\r\n        this.params = {code: appConfig.code}\r\n    }\r\n}"],"names":["numberOf","word","isNaN","Number","concatMaps","maps","buffer","forEach","map","push","entries","Map","filterMap","filter","Array","from","key","value","jsonToMap","json","set","compareMaps","map1","map2","size","has","get","compareObjects","a","b","JSON","stringify","valueOrDefault","prettify","String","Set","join","Date","stringifyDate","jsonify","obj","mapToJson","jsonifyFields","fields","field","hidden","jsonValue","date","year","getFullYear","month","getMonth","day","getDate","defaultValue","isNullOrUndefined","extractJsonItemsWithSuffix","suffix","items","endsWith","mapToVirtualSelectOptions","entry","label","alias","description","factoryElement","document","createElement","create","html","innerHTML","firstElementChild","emptyElement","element","withText","text","textContent","remove","scrollIntoElement","scrollIntoView","behavior","block","toggleFullscreen","getFullscreenElement","exitFullscreen","requestFullscreen","querySelector","body","appendChild","cursorLoadersCount","imagesLocation","stylesLocation","virtualSelectProperties","additionalClasses","disabled","autofocus","markSearchResults","zIndex","optionsCount","maxWidth","position","disableAllOptionsSelectedText","placeholder","noOptionsText","noSearchResultsText","selectAllText","searchPlaceholderText","optionsSelectedText","optionSelectedText","allOptionsSelectedText","clearButtonText","moreText","stylesPromises","modulesPromises","resolveStyle","name","promisePromise","Promise","resolve","reject","link","rel","href","onload","onerror","head","resolveModule","import","promiseName","promiseContainer","promise","mouseEvent","popupMessage","title","popupSweetModal","popupList","list","footer","item","icon","popupAction","confirmButtonText","onConfirm","showConfirmButton","then","result","isConfirmed","popupTimeoutAction","radioOptions","input","undefined","inputOptions","timer","timerProgressBar","backdrop","popupHttpDataError","error","message","popupError","options","clientX","clientY","screenWidth","window","innerWidth","documentElement","clientWidth","screenHeight","innerHeight","clientHeight","getSweetMousePosition","swal","fire","Object","assign","confirmButtonColor","showClass","popup","getAnimationShowClass","hideClass","showCloseButton","allowEnterKey","addEventListener","event","Accessor","constructor","this","method","errorFooter","fetch","style","cursor","request","catch","finally","entity","requestInit","wretch","path","params","headers","post","JsonAccessor","parse","appConfig","config","setAppConfig","UserCheck","super","code"],"mappings":"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"}