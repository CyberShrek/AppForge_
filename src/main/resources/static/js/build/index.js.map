{"version":3,"file":"index.js","sources":["../../../../../../../typescript/utils/resolver.ts","../../../../../../../typescript/utils/api/appInfo.ts","../../../../../../../typescript/utils/modal.ts","../../../../../../../typescript/store.ts","../../../../../../../typescript/components/header.ts","../../../../../../../typescript/index.ts"],"sourcesContent":["export function resolveCSS(name: string){\n    const source = `./css/${name}.css`\n    const headElement = document.querySelector(\"head\")\n    if(headElement.querySelector(`link[href=\"${source}\"]`) === null) {\n        const styleEl = document.createElement(\"link\")\n        styleEl.setAttribute(\"rel\", \"stylesheet\")\n        styleEl.setAttribute(\"href\", source)\n        headElement.appendChild(styleEl)\n    }\n}","import wretch from \"wretch\"\nimport {popupHttpResourceError} from \"../modal\"\nimport {AppInfo} from \"../../entities/AppInfo\"\n\nexport const fetchAppInfo=(): Promise<AppInfo|null> =>\n    wretch(\"../info\")\n        .get()\n        .res(response => response.body as AppInfo)\n        .catch(errorBody => {\n            popupHttpResourceError(errorBody, \"Не удалось загрузить информацию о приложении\")\n            return null\n        })\n","import swal, {SweetAlertResult} from \"sweetalert2\"\nimport {type SweetAlertOptions, type SweetAlertPosition} from \"sweetalert2\"\nimport {resolveCSS} from \"./resolver\"\nimport {mouseEvent} from \"../store\"\n\nresolveCSS(\"third-party/sweetalert2\")\n\nexport function popupMessage(title?: string, text?: string){\n    popupSweetModal({title, text})\n}\n\nexport function popupList(title?: string, list?: string[], footer?: string){\n    popupSweetModal({\n        title,\n        html:`<ul>${list.map(item => `<li>${item}</li>`).join(\"\")}</ul>`,\n        footer\n    })\n}\n\nexport function popupTimeoutAction(text?: string, confirmButtonText?: string, onConfirm?: () => void){\n    popupSweetModal({\n        text, confirmButtonText,\n        showConfirmButton: true,\n        timer: 3000,\n        timerProgressBar: true,\n        backdrop: false\n    }).then(result => {\n        if(result.isConfirmed)\n            onConfirm()\n    })\n}\n\nexport function popupError(title?: string, text?: string){\n    popupSweetModal({title, text, icon: \"error\"})\n}\n\nexport function popupHttpResourceError(html?: string, footer?: string){\n    popupSweetModal({\n        title: \"Ошибка получения ресурса\",\n        icon: \"error\", html, footer\n    })\n}\n\nfunction popupSweetModal(options: SweetAlertOptions): Promise<SweetAlertResult>{\n    const position = getSweetMousePosition()\n    return swal.fire({\n        confirmButtonColor: \"var(--primary-color)\",\n        position,\n        showClass: {popup: 'animate__animated '+getAnimationShowClass(position)},\n        hideClass: {popup: 'animate__animated animate__zoomOut'},\n        showCloseButton: true,\n        allowEnterKey: false,\n        showConfirmButton: false,\n        ...options\n    })\n}\n\nfunction getSweetMousePosition(): SweetAlertPosition{\n    if(!mouseEvent) return \"center\"\n\n    const { clientX, clientY } = mouseEvent,\n        screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n        screenHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight,\n        horizontalPosition = clientX <= screenWidth / 3 ? 'left' : clientX >= (screenWidth / 3) * 2 ? 'right' : 'center',\n        verticalPosition = clientY <= screenHeight / 3 ? 'top' : clientY >= (screenHeight / 3) * 2 ? 'bottom' : 'center',\n        position = `${verticalPosition}-${horizontalPosition}`\n\n    return position === \"top-center\" ? \"top\" : position === \"bottom-center\" ? \"bottom\" : position as SweetAlertPosition\n}\n\nfunction getAnimationShowClass(position: SweetAlertPosition): string{\n    switch (position) {\n        case \"top-left\"     : return \"animate__fadeInTopLeft\"\n        case \"top\"          : return \"animate__fadeInDown\"\n        case \"top-right\"    : return \"animate__fadeInTopRight\"\n        case \"center-left\"  : return \"animate__fadeInLeft\"\n        case \"center\"       : return \"animate__fadeIn\"\n        case \"center-right\" : return \"animate__fadeInRight\"\n        case \"bottom-left\"  : return \"animate__fadeInBottomLeft\"\n        case \"bottom\"       : return \"animate__fadeInUp\"\n        case \"bottom-right\" : return \"animate__fadeInBottomRight\"\n        default             : return \"\"\n    }\n}","// All necessaries are stored here\n\nimport {fetchAppInfo} from \"./utils/api/appInfo\"\n\nexport let appInfo = {}\nfetchAppInfo().then(gottenAppInfo => appInfo = gottenAppInfo)\n\nexport let mouseEvent: MouseEvent\ndocument.addEventListener(\"mousemove\", event => mouseEvent = event)","import {resolveCSS} from \"../utils/resolver\"\nimport {popupList, popupTimeoutAction} from \"../utils/modal\"\nimport {fetchAppInfo} from \"../utils/api/appInfo\"\nimport {Component} from \"./core/Component\"\n\n// export class Header extends Component{\n//\n//     constructor() {\n//         super(document.getElementById(\"header\")!)\n//         this.listen(\"\", () => {\n//\n//         })\n//     }\n// }\n\nexport function resolveHeader(){\n    resolveCSS(\"header\")\n    resolveResetButton()\n    resolveInfoButton()\n    resolveHelpButton()\n}\n\nconst headerElement = document.getElementById(\"header\")!\n\nfunction resolveResetButton(){\n    resolveButtonAction(\"reset\", () => location.reload())\n}\n\nfunction resolveInfoButton(){\n    resolveButtonAction(\"info\", () => {\n        fetchAppInfo().then(appInfo => {\n            if(appInfo){popupList(\n                \"Информация о приложении\",\n                [\n                    \"Версия программы: \"+appInfo.version,\n                    \"Дата последнего обновления: \"+appInfo.updateDate,\n                    \"Технолог: \"+appInfo.technologistName\n                ])\n            }\n        })\n    })\n}\n\nfunction resolveHelpButton(){\n    resolveButtonAction(\"help\", () => {\n        popupTimeoutAction(\n            \"Руководство\",\n            \"Скачать инструкцию\",\n            downloadUserManual\n        )\n    })\n}\n\nfunction downloadUserManual(){\n    const link = document.createElement('a')\n    link.href = `n/d`\n    link.target = '_blank'\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n}\n\nfunction resolveButtonAction(buttonClassName: string, onClick: () => void){\n    headerElement.querySelector(\"button.\"+buttonClassName).addEventListener(\"click\", onClick)\n}","import {resolveHeader} from \"./components/header\"\nimport {resolveCSS} from \"./utils/resolver\"\nimport {Component} from \"./components/core/Component\"\n\nresolveCSS(\"global\")\nresolveCSS(\"inputs\")\nresolveCSS(\"states\")\nresolveCSS(\"third-party/animate\")\n\nresolveHeader()"],"names":["resolveCSS","name","source","headElement","document","querySelector","styleEl","createElement","setAttribute","appendChild","fetchAppInfo","wretch","get","res","response","body","catch","errorBody","popupSweetModal","title","icon","html","footer","mouseEvent","options","position","clientX","clientY","screenWidth","window","innerWidth","documentElement","clientWidth","screenHeight","innerHeight","clientHeight","getSweetMousePosition","swal","fire","Object","assign","confirmButtonColor","showClass","popup","getAnimationShowClass","hideClass","showCloseButton","allowEnterKey","showConfirmButton","then","gottenAppInfo","addEventListener","event","headerElement","getElementById","downloadUserManual","link","href","target","click","removeChild","resolveButtonAction","buttonClassName","onClick","location","reload","appInfo","list","version","updateDate","technologistName","map","item","join","onConfirm","text","confirmButtonText","timer","timerProgressBar","backdrop","result","isConfirmed"],"mappings":"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"}